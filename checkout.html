<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Checkout - TELEMEDICINE</title>
    <script src='https://kit.fontawesome.com/a076d05399.js' crossorigin='anonymous'></script>
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Baloo+Bhai+2&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/index.css">
    <style>
        body {
            font-family: sans-serif;
            margin: 0;
            padding: 0;
            background-color: #f4f4f4;
            color: #333;
            display: flex;
            flex-direction: column;
            min-height: 100vh;
        }

        /* Header Styles (consistent with other pages) */
        header {
            background-color: #f8f9fa;
            padding: 10px 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            flex-shrink: 0;
        }

        .logo {
            display: flex;
            align-items: center;
            text-decoration: none;
            color: inherit;
            flex-shrink: 0;
        }

        #logo img {
            height: 45px;
            margin-right: 10px;
        }

        .logo span {
            font-weight: bold;
            font-size: 1.2em;
        }

        .main-nav ul {
            list-style: none;
            padding: 0;
            margin: 0;
            display: flex;
            align-items: center;
            flex-wrap: wrap;
        }

        .main-nav li {
            margin-left: 20px;
        }

        .main-nav a {
            text-decoration: none;
            color: #333;
            padding: 8px 12px;
            border-radius: 5px;
            transition: background-color 0.3s ease;
        }

        .main-nav a:hover,
        .main-nav a.active {
            background-color: #5cb85c;
            color: white;
        }

         /* Styling for nested sub-menu (from index.html) */
         .main-nav ul ul {
             display: none;
             position: absolute;
             background-color: #f8f9fa;
             box-shadow: 0 8px 16px rgba(0,0,0,0.2);
             z-index: 1;
             padding: 10px 0;
             border-radius: 5px;
         }

          .main-nav li:hover > ul {
              display: block;
          }

          .main-nav ul li {
              margin: 0;
              padding: 8px 20px;
              white-space: nowrap;
          }

         .main-nav ul li a {
             padding: 0;
             color: #333;
         }

         .main-nav ul li a:hover {
             background-color: transparent;
             color: #5cb85c;
         }

         /* Style for images within nav links (like the cart icon) */
         .main-nav a img {
              height: 25px;
              vertical-align: middle;
              margin-right: 0;
         }


        /* Checkout Page Specific Styles */
        .checkout-container {
            max-width: 800px; /* Adjust width as needed */
            margin: 30px auto;
            padding: 30px;
            background-color: #fff;
            border-radius: 8px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
            box-sizing: border-box;
            width: 95%;
            flex-grow: 1;
        }

        .checkout-container h1 {
            text-align: center;
            margin-bottom: 30px;
            color: #333;
        }

        .checkout-form .form-section {
             margin-bottom: 30px;
             padding-bottom: 20px;
             border-bottom: 1px solid #eee; /* Separator line */
        }

         .checkout-form .form-section:last-child {
              border-bottom: none; /* No border for the last section */
              padding-bottom: 0;
         }


        .checkout-form h2 {
            margin-top: 0;
            margin-bottom: 20px;
            color: #555;
            font-size: 1.3em;
            border-bottom: 2px solid #5cb85c; /* Underline section title */
            display: inline-block; /* Shrink underline to text width */
            padding-bottom: 5px;
        }

        .checkout-form .form-group {
            margin-bottom: 15px;
        }

        .checkout-form label {
            display: block;
            margin-bottom: 5px;
            color: #555;
            font-weight: bold;
        }

        .checkout-form input[type="text"],
        .checkout-form input[type="email"],
        .checkout-form input[type="tel"],
        .checkout-form input[type="number"], /* For card number, CVV etc. */
        .checkout-form input[type="date"], /* For expiry date */
        .checkout-form select,
        .checkout-form textarea {
            width: 100%;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 4px;
            box-sizing: border-box;
            font-size: 1em;
             opacity: 1;
             cursor: text;
        }

         /* Add focus style for input fields */
        .checkout-form input:focus,
        .checkout-form select:focus,
        .checkout-form textarea:focus {
             outline: none;
             border-color: #5cb85c;
             box-shadow: 0 0 5px rgba(92, 184, 92, 0.5);
        }


         .checkout-form .row {
             display: flex;
             gap: 20px;
             margin-bottom: 15px;
             flex-wrap: wrap;
         }

         .checkout-form .row > .form-group {
             flex: 1;
             margin-bottom: 0;
         }


        .place-order-btn {
            display: block;
            width: 250px;
            margin: 30px auto 0;
            background-color: #28a745;
            color: white;
            border: none;
            padding: 12px 20px;
            border-radius: 5px;
            text-decoration: none;
            cursor: pointer;
            font-size: 1.1em;
            transition: background-color 0.3s ease;
            text-align: center;
        }

        .place-order-btn:hover {
            background-color: #218838;
        }


        /* Footer styles - Consistent with other pages */
        footer {
            background-color: #333;
            color: white;
            padding: 20px;
            text-align: center;
            margin-top: 30px;
            flex-shrink: 0;
        }

        footer ul {
            list-style: none;
            padding: 0;
            margin: 0 0 15px 0;
        }

        footer ul li {
            display: inline;
            margin: 0 10px;
        }

        footer ul li a {
            color: white;
            text-decoration: none;
        }

        footer ul li a:hover {
            text-decoration: underline;
        }

        .contact-details {
             list-style: none;
             padding: 0;
             margin-bottom: 15px;
             font-weight: bold;
        }

        .contact-details li {
             display: block;
             margin: 5px 0;
             font-weight: normal;
        }

        .contact-details li a {
             color: white;
             text-decoration: none;
        }

         .contact-details li a:hover {
             text-decoration: underline;
         }

        .float-right {
            float: right;
        }

        .float-right a {
             color: white;
             text-decoration: none;
        }
         .float-right a:hover {
            text-decoration: underline;
         }

        footer p {
            margin: 5px 0;
        }
         footer p a {
              color: white;
              text-decoration: none;
          }
         footer p a:hover {
              text-decoration: underline;
          }

    </style>
</head>
<body>
    <header>
        <a href="index.html" class="logo">
            <img src="images/Mental-Health-Logo-final.jpg" alt="MY WELLNEST">
            <span>MY WELLNEST</span>
        </a>
        <nav class="main-nav">
            <ul>
                <li><a href="index.html">HOME</a></li>
                <li><a href="about.html">ABOUT US</a></li>
                <li><a href="contact-us.html">CONTACT US</a></li>
                <li><a href="medicine.html">MEDICINES</a></li>
                <li><a href="reminder.html">REMINDER</a></li>
                <li><a href="counselling.html">COUNSELLING</a></li>
                <li><a href="cart.html" class="active"><img src="images/black-shopping-cart-icon-22.png" alt="Shopping Cart"></a></li> </ul>
        </nav>
    </header>

    <div class="checkout-container">
        <h1>Complete Your Order</h1>

        <form id="checkout-form" class="checkout-form">
            <div class="form-section">
                <h2>Shipping Information</h2>
                <div class="form-group">
                    <label for="shipping-name">Full Name:</label>
                    <input type="text" id="shipping-name" name="shippingName" required>
                </div>
                <div class="form-group">
                    <label for="shipping-address1">Address Line 1:</label>
                    <input type="text" id="shipping-address1" name="shippingAddress1" required>
                </div>
                <div class="form-group">
                    <label for="shipping-address2">Address Line 2 (Optional):</label>
                    <input type="text" id="shipping-address2" name="shippingAddress2">
                </div>
                <div class="row">
                    <div class="form-group">
                        <label for="shipping-city">City:</label>
                        <input type="text" id="shipping-city" name="shippingCity" required>
                    </div>
                    <div class="form-group">
                        <label for="shipping-state">State:</label>
                        <input type="text" id="shipping-state" name="shippingState" required>
                    </div>
                </div>
                <div class="row">
                    <div class="form-group">
                        <label for="shipping-zip">Zip Code:</label>
                        <input type="text" id="shipping-zip" name="shippingZip" required pattern="\d{5,10}" title="Enter a valid zip code">
                    </div>
                    <div class="form-group">
                         <label for="shipping-country">Country:</label>
                         <input type="text" id="shipping-country" name="shippingCountry" value="India" required>
                     </div>
                </div>
                 <div class="form-group">
                     <label for="shipping-phone">Phone Number:</label>
                     <input type="tel" id="shipping-phone" name="shippingPhone" required>
                 </div>
            </div>

            <div class="form-section">
                <h2>Payment Information</h2>
                <div class="form-group">
                    <label for="card-number">Card Number:</label>
                    <input type="text" id="card-number" name="cardNumber" placeholder="XXXX-XXXX-XXXX-XXXX">
                </div>
                <div class="row">
                    <div class="form-group">
                        <label for="expiry-date">Expiry Date:</label>
                        <input type="text" id="expiry-date" name="expiryDate" placeholder="MM/YY">
                    </div>
                    <div class="form-group">
                        <label for="cvv">CVV:</label>
                        <input type="text" id="cvv" name="cvv" placeholder="XXX">
                    </div>
                </div>
                 <div class="form-group">
                     <label for="card-name">Cardholder Name:</label>
                     <input type="text" id="card-name" name="cardName">
                 </div>
                 <p style="font-size: 0.9em; color: #777; margin-top: 10px;">Note: Payment processing is not implemented in this demo. This section is for visual representation only.</p>
            </div>

             <div class="form-section">
                 <h2>Order Summary</h2>
                  <p>Order details will appear here in a functional application.</p>
                  <p><strong>Total:</strong> <span id="checkout-total">Calculating...</span></p>
             </div>


            <button type="submit" class="place-order-btn">Place Order</button>
        </form>

         <div id="order-status-message" style="text-align: center; margin-top: 20px; font-weight: bold;">
            </div>

    </div>

    <footer>
        <ul class="footer-details">
            <li><a href="index.html">Home</a></li>
            <li><a href="about.html">About Us</a></li>
            <li><a href="contact-us.html">Contact Us</a></li>
            <li><a href="login.html">Login</a></li>
            <li><a href="signup.html">signup</a></li>
        </ul>
        <ul class="contact-details">Quick Contact Details
            <li>Address:A-15,Malviya nagar,Jaipur</li>
            <li>Contact No. : 8441912317</li>
            <li><a href="#">Facebook</a></li>
            <li><a href="#">LinkedIn</a></li>
        </ul>
        <p class="float-right"><a href="#">Back to top</a></p>
        <p>© 2025 MY WELLNEST, Inc. · <a href="#">Privacy</a> · <a href="#">Terms</a></p>
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const checkoutForm = document.getElementById('checkout-form');
            const orderStatusMessage = document.getElementById('order-status-message');
            const checkoutTotalSpan = document.getElementById('checkout-total');

             // Fetch total from backend (requires /api/cart endpoint)
              fetch('http://localhost:3001/api/cart')
                  .then(response => response.json())
                  .then(cartData => {
                      let total = cartData.reduce((sum, item) => sum + (parseFloat(item.price) * parseInt(item.quantity)), 0);
                      checkoutTotalSpan.textContent = total.toFixed(2);
                  })
                  .catch(error => {
                      console.error('Error fetching cart total for checkout:', error);
                      checkoutTotalSpan.textContent = 'Could not load total';
                  });


            checkoutForm.addEventListener('submit', function(event) {
                event.preventDefault(); // *** This line is CRUCIAL - it stops the default form submission (page reload) ***

                // Simple form validation (optional but good practice)
                 if (!checkoutForm.checkValidity()) {
                     checkoutForm.reportValidity(); // Trigger browser's built-in validation UI
                      orderStatusMessage.textContent = 'Please fill in all required fields.';
                      orderStatusMessage.style.color = 'red';
                      orderStatusMessage.style.display = 'block';
                     return; // Stop the process if form is invalid
                 }

                 // Clear previous messages
                 orderStatusMessage.textContent = '';
                 orderStatusMessage.style.display = 'none';


                // In a real application, you would collect form data and send it to the backend
                const formData = new FormData(checkoutForm);
                const checkoutData = {};
                formData.forEach((value, key) => {
                    checkoutData[key] = value;
                });

                console.log("Simulating order placement with data:", checkoutData);

                 // --- Simulate backend call success ---
                 // In a real app, a fetch() call to your backend's order processing endpoint would go here.
                 // The redirect would typically happen inside the .then() block of that fetch call,
                 // *after* the backend confirms the order was placed successfully.

                 // For this simulation:
                 // Optional: Store total in local storage to display on confirmation page
                  const currentTotal = document.getElementById('checkout-total').textContent;
                  localStorage.setItem('lastOrderTotal', currentTotal);


                 // === This line redirects the page to the order confirmation page ===
                 window.location.href = 'order-confirmation.html';
                 // ===================================================================


                 // --- If you were implementing backend fetch, your catch block would handle errors ---
                 /*
                 fetch('http://localhost:3001/api/order/place', { // Replace with your backend endpoint
                     method: 'POST',
                     headers: {
                         'Content-Type': 'application/json',
                     },
                     body: JSON.stringify(checkoutData),
                 })
                 .then(response => {
                      if (!response.ok) {
                           // Handle non-200 status codes from the backend
                           throw new Error(`Order placement failed: ${response.status}`);
                       }
                       return response.json(); // Assuming your backend returns JSON on success
                 })
                 .then(data => {
                      // On successful backend response: store necessary data and redirect
                       localStorage.setItem('lastOrderTotal', data.total || currentTotal); // Use total from backend if available
                       // localStorage.setItem('lastOrderId', data.orderId); // Example: store order ID from backend
                       window.location.href = 'order-confirmation.html'; // Redirect after successful backend processing
                 })
                 .catch((error) => {
                     // On error during the fetch call or from backend error status:
                     console.error('Error placing order:', error);
                     orderStatusMessage.textContent = 'Failed to place order. Please try again. Details: ' + error.message;
                     orderStatusMessage.style.color = 'red';
                     orderStatusMessage.style.display = 'block';
                 });
                 */
            });
        });
    </script>
</body>
</html>